import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import Button from '../components/common/Button';

const dummyCartItems = [
  {
    id: 1,
    title: 'Gaming Chair',
    price: 'Dhs. 249.99',
    img: '/images/chair.png',
    quantity: 1,
  },
  {
    id: 2,
    title: 'Gaming Peripherals',
    price: 'Dhs. 449.99',
    img: '/images/gamepad.png',
    quantity: 1,
  },
];

const CartPage = () => {
  const navigate = useNavigate();
  const [cart, setCart] = useState(dummyCartItems);

  const updateQuantity = (id, amount) => {
    setCart((prevCart) =>
      prevCart.map((item) =>
        item.id === id
          ? { ...item, quantity: Math.max(1, item.quantity + amount) }
          : item
      )
    );
  };

  const getTotal = () => {
    return cart
      .reduce((sum, item) => {
        const price = parseFloat(item.price.replace('Dhs. ', ''));
        return sum + price * item.quantity;
      }, 0)
      .toFixed(2);
  };

  return (
    <section className="px-4 py-10 max-w-[1280px] mx-auto">
      <h2 className="text-2xl font-bold text-dark-blue mb-6">Your cart</h2>
      <div className="bg-[#F6F8F9] rounded-md shadow overflow-hidden">
        <div className="grid grid-cols-3 md:grid-cols-5 py-3 px-4 text-sm font-semibold text-gray-500 border-b">
          <span className="col-span-2">Product</span>
          <span className="text-center">Quantity</span>
          <span className="hidden md:block text-right md:col-span-1">Total</span>
        </div>

        {cart.map((item) => (
          <div
            key={item.id}
            className="grid grid-cols-3 md:grid-cols-5 gap-4 items-center py-4 px-4 border-b"
          >
            <div className="col-span-2 flex items-center gap-3">
              <img
                src={item.img}
                alt={item.title}
                className="w-12 h-12 object-contain rounded"
              />
              <div>
                <p className="font-semibold text-dark-blue">{item.title}</p>
                <p className="text-xs text-gray-500">{item.price}</p>
              </div>
            </div>
            <div className="flex justify-center items-center gap-1">
              <button
                onClick={() => updateQuantity(item.id, -1)}
                className="w-[44px] h-[44px] bg-[#73A4E0] text-white rounded font-bold text-xl"
              >
                -
              </button>
              <span className="w-[85px] h-[44px] border-y border-[#0000003D] flex items-center justify-center">
                {String(item.quantity).padStart(2, '0')}
              </span>
              <button
                onClick={() => updateQuantity(item.id, 1)}
                className="w-[44px] h-[44px] bg-[#112D49] text-white rounded font-bold text-xl"
              >
                +
              </button>
            </div>
            <div className="hidden md:block text-right text-sm text-dark-blue font-medium">
              {item.price}
            </div>
          </div>
        ))}

        <div className="px-4 py-6 bg-[#EDF2F4] flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3">
          <div>
            <p className="text-sm text-gray-500">Estimated Total</p>
            <p className="text-dark-blue font-semibold text-base">Dhs. {getTotal()} AED</p>
            <p className="text-xs text-gray-400">Taxes, discounts and shipping calculated at checkout.</p>
          </div>
          <Button
            btnText="Check Out"
            btnClass="bg-dark-blue text-white px-6 py-3 rounded hover:bg-[#112D49]"
            onClick={() => alert('Proceed to checkout')}
          />
        </div>
      </div>
    </section>
  );
};

export default CartPage;
